<div class="metal-calculator">
    <form id="metal-calculator-form">
        <label for="materialWeight">Gewicht des Materials (kg):</label>
        <input type="number" id="materialWeight" name="materialWeight" value="{data.material_weight}" step="0.01" required><br>

        <label for="pricePerUnit">Preis pro Einheit (€):</label>
        <input type="number" id="pricePerUnit" name="pricePerUnit" value="{data.price_per_kg}" step="0.01" required><br>

        <label for="unit">Einheit:</label>
        <select id="unit" name="unit" required>
            <option value="kg" <f:if condition="{data.unit} == 'kg'">selected</f:if>>Kilogramm</option>
            <option value="g" <f:if condition="{data.unit} == 'g'">selected</f:if>>Gramm</option>
        </select><br>

        <label for="cuttingCost">Zuschnittkosten (€):</label>
        <input type="number" id="cuttingCost" name="cuttingCost" value="{data.cutting_cost}" step="0.01" required><br>

        <button type="button" onclick="calculateMetalCost()">Berechnen</button>
    </form>

    <div id="metalCostResult" style="display:none;">
        <h3>Gesamtkosten: <span id="totalCost"></span> €</h3>
    </div>
</div>

<script>
    function calculateMetalCost() {
        var weight = parseFloat(document.getElementById('materialWeight').value);
        var pricePerUnit = parseFloat(document.getElementById('pricePerUnit').value);
        var unit = document.getElementById('unit').value;
        var cuttingCost = parseFloat(document.getElementById('cuttingCost').value);

        // Umrechnung bei Gramm
        if (unit === 'g') {
            weight = weight / 1000; // Gramm in Kilogramm umrechnen
        }

        // Berechnung der Gesamtkosten
        var totalCost = (weight * pricePerUnit) + cuttingCost;

        // Ausgabe der Gesamtkosten
        if (!isNaN(totalCost) && totalCost > 0) {
            document.getElementById('metalCostResult').style.display = 'block';
            document.getElementById('totalCost').innerHTML = totalCost.toFixed(2);
        } else {
            alert('Bitte geben Sie gültige Werte ein.');
        }
    }
</script>
