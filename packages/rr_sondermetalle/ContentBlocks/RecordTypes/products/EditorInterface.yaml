name: romminger/products
table: tx_romminger_products
prefixFields: false
labelField: name
security:
  ignorePageTypeRestriction: true
fields:
  - identifier: id
    type: Uuid
    size: 50
    version: 7
    enableCopyToClipboard: true

  - identifier: name
    type: Text
    label: Name

  - identifier: abstract
    type: Textarea

  - identifier: description
    type: Textarea
    enableRichtext: true
    label: Description

  - identifier: images
    type: File
    label: "Product Images"
    allowed: common-image-types
    maxitems: 5

  - identifier: material
    type: Select
    renderType: selectSingle
    foreign_table: "tx_romminger_materials"

  - identifier: category
    type: Select
    renderType: selectSingle
    foreign_table: "tx_romminger_categories"
    foreign_table_where: "AND {#tx_romminger_categories}.{#parent_category} > 0 ORDER BY uid"
    onChange: reload

  - identifier: salesUnitType
    type: Select
    renderType: selectSingle
    onChange: reload
    minitems: 1
    items:
      - ["Per Piece", "piece"]
      - ["By Weight", "weight"]
      - ["By Meter", "meter"]

  - identifier: unitPrice
    type: Number
    format: decimal

  - identifier: thickness
    type: Number
    format: decimal
    displayCond: "FIELD:category:IN:1,2,5" # Foile(1), Blech(2), Coil(5)

  - identifier: width
    type: Number
    format: decimal
    displayCond: "FIELD:category:IN:1,2,5" # Foile(1), Blech(2), Coil(5)

  - identifier: diameter
    type: Number
    format: decimal
    label: Diameter (mm)
    displayCond: "FIELD:category:IN:3,6" # Draht(3), Rundstab(6)

  - identifier: outerDiameter
    type: Number
    format: decimal
    label: Outer Diameter (mm)
    displayCond: "FIELD:category:=:4" # Rohr(4)

  - identifier: wallThickness
    type: Number
    format: decimal
    label: Wall Thickness (mm)
    displayCond: "FIELD:category:=:4" # Rohr(4)

  - identifier: length
    type: Number
    format: decimal
    label: Length (mm)
    displayCond:
      OR:
        - "FIELD:salesUnitType:=:meter"
        - "FIELD:category:IN:1,2,3,4,5,6" # Foile(1), Blech(2), Draht(3), Rohr(4), Coil(5), Rundstab(6)

  - identifier: minOrderQuantity
    type: Number
    format: integer
    label: Minimum Order Quantity (g)
    displayCond: "FIELD:salesUnitType:=:weight"

  - identifier: priceBasedOnWeight
    type: Number
    format: decimal
    label: Price Based on Weight (per g/kg)
    displayCond: "FIELD:salesUnitType:=:weight"

  - identifier: minOrderLength
    type: Number
    format: decimal
    label: Minimum Order Length (m)
    displayCond: "FIELD:salesUnitType:=:meter"

  - identifier: priceBasedOnLength
    type: Number
    format: decimal
    label: Price Based on Length (per m)
    displayCond: "FIELD:salesUnitType:=:meter"

  - identifier: status
    type: Select
    renderType: selectSingle
    label: Product Status
    items:
      - ["Available", "available"]
      - ["Out of Stock", "out_of_stock"]
