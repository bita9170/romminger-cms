<html
  xmlns:f="http://typo3.org/ns/TYPO3/CMS/Fluid/ViewHelpers"
  data-namespace-typo3-fluid="true"
>
  <f:layout name="Default" />

  <f:section name="Main">
    <f:form action="proxy" name="user" class="px-3" object="{user}">
      <div
        class="form-row grid grid-cols-1 sm:grid-cols-2 gap-3 w-full max-w-3xl mx-auto bg-gray-50 border border-gray-300 rounded-md p-4 shadow-sm"
        title="{f:translate(key: 'frontend.preview.title', extensionName: 'rr_sondermetalle')}"
      >
        <f:for each="{settings.fields.selected}" as="selectedField">
          <f:if
            condition="{selectedField} != 'password' && {selectedField} != 'passwordRepeat' && {selectedField} != 'privacy'"
          >
            <f:then>
              <f:alias
                map="{options: '{settings.fields.configuration.{selectedField}}'}"
              >
                <div
                  class="flex flex-col space-y-1 border-b border-gray-200 pb-2 last:border-b-0"
                >
                  <f:render
                    partial="Preview/{options.partial}"
                    arguments="{user: user, fieldName: selectedField, options: options}"
                  />
                </div>
              </f:alias>
            </f:then>
          </f:if>
        </f:for>
      </div>
    </f:form>
  </f:section>
</html>
